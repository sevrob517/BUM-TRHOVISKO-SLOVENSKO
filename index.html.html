<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BUM TRHOVISKO SLOVENSKO.SK</title>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#f4f6f8;color:#1f2937;}
header{background:#1e40af;color:white;padding:0.7rem 1.5rem;display:flex;justify-content:space-between;align-items:center;}
header span{font-size:1.1rem;font-weight:bold;}
header button{background:white;color:#1e40af;border:none;padding:6px 12px;border-radius:6px;font-weight:bold;cursor:pointer;}
header .links{display:flex;gap:10px;}
header .links a{color:white;text-decoration:underline;cursor:pointer;font-size:0.9rem;}
.hero{background:linear-gradient(135deg,#2563eb,#3b82f6);color:white;padding:3rem 2rem;text-align:center;}
.hero h1{font-size:2.6rem}
.features{max-width:1100px;margin:auto;padding:2rem;display:flex;gap:1.5rem;flex-wrap:wrap;}
.feature{background:white;flex:1 1 300px;padding:1.5rem;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.12);cursor:pointer;}
.feature-detail{display:none;margin-top:1rem}
section{max-width:1200px;margin:auto;padding:3rem 2rem;}
.cards{display:flex;gap:1.5rem;flex-wrap:wrap;}
.card{background:white;flex:1 1 320px;padding:1.5rem;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.12);cursor:pointer;}
.card-detail{display:none;margin-top:1rem}
form{background:white;padding:2rem;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.12);max-width:600px;margin:auto;}
form input,form select,form textarea{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc;}
form button{background:#0b57d0;color:white;border:none;padding:12px;width:100%;border-radius:6px;cursor:pointer;}
footer{background:#1e40af;color:white;text-align:center;padding:1.5rem;}
#authPanel{display:none;padding:2rem}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;}
.modal-content{background:white;padding:2rem;border-radius:12px;max-width:600px;max-height:80%;overflow:auto;position:relative;}
.modal-content h2{margin-top:0;}
.modal-close{position:absolute;top:10px;right:15px;font-size:1.2rem;cursor:pointer;}
</style>
</head>
<body>

<header>
<span>BUM TRHOVISKO SLOVENSKO.SK</span>
<div class="links">
<a onclick="openModal('cennikModal')">Cenn√≠k</a>
<a onclick="openModal('termsModal')">Obchodn√© podmienky</a>
<button onclick="toggleAuth()">Prihl√°senie / Registr√°cia</button>
</div>
</header>

<!-- Modaly -->
<div id="cennikModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal('cennikModal')">&times;</span>
    <h2>Cenn√≠k</h2>
    <ul>
      <li>Mal√Ω dopyt: 1 kredit</li>
      <li>Stredn√Ω dopyt: 2-3 kredity</li>
      <li>Veƒæk√° z√°kazka: 5+ kreditov</li>
      <li>Bal√≠ky: 10 / 30 / 100 kreditov</li>
    </ul>
  </div>
</div>

<div id="termsModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal('termsModal')">&times;</span>
    <h2>Obchodn√© podmienky</h2>
    <p>Platba sa uskutoƒçn√≠ kartou a≈æ po potvrden√≠ obch. podmienok. Sprostredkovateƒæ nezodpoved√° za dohody medzi z√°kazn√≠kom a remeseln√≠kom. V≈°etky probl√©my rie≈°ia priamo √∫ƒçastn√≠ci obchodu.</p>
  </div>
</div>

<div id="authPanel">
<form id="loginForm">
<h2>Prihl√°senie</h2>
<input type="email" id="login_email" placeholder="Email" required>
<input type="password" id="login_password" placeholder="Heslo" required>
<button type="submit">Prihl√°si≈• sa</button>
</form>

<br>

<form id="registrationForm">
<h2>Registr√°cia</h2>
<select id="reg_typ" required>
<option value="">Typ √∫ƒçtu</option>
<option value="zakaznik">Z√°kazn√≠k</option>
<option value="remeselnik">Remeseln√≠k</option>
</select>

<select id="reg_kategoria">
<option value="">Kateg√≥ria slu≈æby</option>
<option>Stavebn√© a technick√© remesl√°</option>
<option>In≈°tal√°cie a opravy</option>
<option>Drev√°rske a kovov√© pr√°ce</option>
<option>Povrchov√© a dizajnov√© pr√°ce</option>
<option>Slu≈æby pre dom√°cnos≈•</option>
<option>Z√°hrada a exteri√©r</option>
<option>Auto a technika</option>
<option>Remeseln√° v√Ωroba</option>
<option>Digit√°lne a kreat√≠vne slu≈æby</option>
<option>Lok√°lne a osobn√© slu≈æby</option>
<option>BOZP a rev√≠zie</option>
</select>

<input type="text" id="reg_name" placeholder="Meno / N√°zov" required>
<input type="email" id="reg_email" placeholder="Email" required>
<input type="tel" id="reg_telefon" placeholder="Telef√≥n">
<input type="text" id="reg_popis" placeholder="Popis">
<input type="file" id="reg_foto" accept="image/*">
<button type="submit">Registrova≈•</button>
</form>
</div>

<div class="hero">
<h1>BUM TRHOVISKO SLOVENSKO.SK</h1>
<p>Digit√°lne trhovisko, ktor√© sp√°ja z√°kazn√≠kov a poskytovateƒæov slu≈æieb jednoduch√Ωm, f√©rov√Ωm a transparentn√Ωm sp√¥sobom.</p>
</div>

<section>
<h2>Kateg√≥rie slu≈æieb</h2>
<div class="cards">
<div class="card" onclick="toggle('c1')">üõ†Ô∏è Stavebn√© a technick√© remesl√°
<div id="c1" class="card-detail">Mur√°r, Tes√°r, Obkladaƒç, Maliar, Sadrokartonista</div></div>
<div class="card" onclick="toggle('c2')">üîß In≈°tal√°cie a opravy
<div id="c2" class="card-detail">Elektrik√°r, Vod√°r, K√∫ren√°r, Plyn√°r</div></div>
<div class="card" onclick="toggle('c3')">ü™µ Drev√°rske a kovov√© pr√°ce
<div id="c3" class="card-detail">Stol√°r, Zv√°raƒç, Kov√°ƒç</div></div>
<div class="card" onclick="toggle('c4')">üé® Povrchov√© a dizajnov√© pr√°ce
<div id="c4" class="card-detail">Maliarske pr√°ce, Dizajn interi√©ru</div></div>
</div>
</section>

<section>
<h2>Odosla≈• objedn√°vku remeseln√≠kovi</h2>
<form action="https://formspree.io/f/xaqqevlw" method="POST">
<input type="text" name="name" placeholder="Meno z√°kazn√≠ka" required>
<input type="email" name="_replyto" placeholder="Email z√°kazn√≠ka" required>
<select name="kategoria" required>
<option value="">Vyber slu≈æbu</option>
<option>Stavebn√© a technick√© remesl√°</option>
<option>In≈°tal√°cie a opravy</option>
<option>Drev√°rske a kovov√© pr√°ce</option>
<option>Povrchov√© a dizajnov√© pr√°ce</option>
<option>Slu≈æby pre dom√°cnos≈•</option>
<option>Z√°hrada a exteri√©r</option>
<option>Auto a technika</option>
<option>Remeseln√° v√Ωroba</option>
<option>Digit√°lne a kreat√≠vne slu≈æby</option>
<option>Lok√°lne a osobn√© slu≈æby</option>
<option>BOZP a rev√≠zie</option>
</select>
<input type="email" name="remeselnik_email" placeholder="Email remeseln√≠ka" required>
<textarea name="message" rows="5" placeholder="Spr√°va / objedn√°vka" required></textarea>
<button>Odosla≈• objedn√°vku</button>
</form>
</section>

<footer>
¬© 2026 BUM TRHOVISKO SLOVENSKO.SK
</footer>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script>
const SUPABASE_URL = 'TU_DAJ_SVOJU_SUPABASE_URL';
const SUPABASE_KEY = 'TU_DAJ_SVOJ_ANON_KEY';
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

function toggle(id){
  const el=document.getElementById(id);
  el.style.display=el.style.display==="block"?"none":"block";
}

function toggleAuth(){
  const p=document.getElementById("authPanel");
  p.style.display=p.style.display==="block"?"none":"block";
}

// --- Modaly ---
function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(id){document.getElementById(id).style.display="none";}

// --- Registracia ---
async function registerUser(event){
  event.preventDefault();
  const name = document.querySelector('#reg_name').value;
  const email = document.querySelector('#reg_email').value;
  const telefon = document.querySelector('#reg_telefon').value;
  const typ_uctu = document.querySelector('#reg_typ').value;
  const kategoria = document.querySelector('#reg_kategoria').value;
  const popis = document.querySelector('#reg_popis').value;
  const fileInput = document.querySelector('#reg_foto');
  let foto_url = null;

  if(fileInput.files.length>0){
    const file = fileInput.files[0];
    const fileName = `${Date.now()}_${file.name}`;
    const { data, error } = await supabase.storage.from('user-photos').upload(fileName,file);
    if(error){alert('Chyba pri nahr√°van√≠ fotky: '+error.message); return;}
    const { publicUrl } = supabase.storage.from('user-photos').getPublicUrl(fileName);
    foto_url = publicUrl;
  }

  const { data, error } = await supabase.from('users').insert([
    {name,email,telefon,typ_uctu,kategoria,popis,foto_url}
  ]);
  if(error){alert('Chyba pri registr√°cii: '+error.message);} 
  else {alert('Registr√°cia prebehla √∫spe≈°ne!'); event.target.reset();}
}

document.querySelector('#registrationForm').addEventListener('submit',registerUser);
</script>

</body>
</html>